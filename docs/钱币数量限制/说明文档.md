# 钱币数量限制功能说明文档

## 项目规划

### 功能需求
为"认识小数"游戏增加钱币数量限制规则：
- "角"钱币出现的总个数不超过6个
- "分"钱币出现的总个数不超过9个

### 技术方案
修改 `generateRandomCoins()` 函数中的钱币生成逻辑，在两个关键位置添加数量限制：
1. 初始随机生成阶段
2. 总金额超过20元时的缩减阶段

## 实施方案

### 代码修改位置
文件：`renshixiaoshu.html`
函数：`generateRandomCoins()` (约1515-1593行)

### 具体修改内容

#### 1. 初始生成阶段限制
- 1角钱币：从 `Math.floor(Math.random() * 8) + 1` 改为 `Math.floor(Math.random() * 6) + 1`
- 1分钱币：从 `Math.floor(Math.random() * 10) + 1` 改为 `Math.floor(Math.random() * 9) + 1`

#### 2. 缩减阶段限制
在总金额超过20元的缩减逻辑中，添加角分钱币的数量上限：
- 角钱币（value >= 0.10）：最多6个
- 分钱币（value < 0.10）：最多9个

## 进度记录

### 2024年12月30日
- ✅ **已完成** - 分析当前钱币生成规则中角和分钱币的数量限制
- ✅ **已完成** - 修改generateRandomCoins函数，将角钱币限制为不超过6个，分钱币限制为不超过9个
- ✅ **已完成** - 测试新的钱币数量限制是否正常工作

### 技术实现细节
1. **初始生成限制**：直接修改随机数生成范围
2. **缩减逻辑优化**：在按比例缩减时也保持数量上限
3. **兼容性保证**：保持原有的5元和5角特殊限制不变

### 验证结果
- 游戏可以正常启动和运行
- 钱币生成遵循新的数量限制规则
- 不影响游戏的其他功能

## 技术约束
- 保持与现有游戏逻辑的兼容性
- 不影响总金额不超过20元的限制
- 维持5元钱币最多3个、5角钱币固定1个的原有规则

## 验收标准
- [x] 角钱币总数不超过6个
- [x] 分钱币总数不超过9个
- [x] 游戏正常运行
- [x] 不影响其他钱币类型的生成
- [x] 总金额限制仍然有效