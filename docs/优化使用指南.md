# ä¼˜åŒ–ä»£ç ä½¿ç”¨æŒ‡å—

## ğŸ¯ å¦‚ä½•ä½¿ç”¨ä¼˜åŒ–åçš„ä»£ç 

### 1. ä½¿ç”¨å¸¸é‡é…ç½®

**ä½ç½®**: `src/constants/index.js`

```javascript
// å¯¼å…¥éœ€è¦çš„å¸¸é‡
import { STORAGE_KEYS, ANIMATION_DURATION, COLORS } from '../constants';

// ä½¿ç”¨å¸¸é‡æ›¿ä»£ç¡¬ç¼–ç 
localStorage.getItem(STORAGE_KEYS.FAVORITES); // è€Œä¸æ˜¯ 'favorites'
setTimeout(callback, ANIMATION_DURATION.TRANSITION); // è€Œä¸æ˜¯ 300
```

**ä½•æ—¶ä½¿ç”¨**:
- éœ€è¦é…ç½®å€¼æ—¶
- é¿å…é­”æ³•æ•°å­—/å­—ç¬¦ä¸²
- éœ€è¦åœ¨å¤šå¤„ä½¿ç”¨ç›¸åŒå€¼

---

### 2. ä½¿ç”¨è‡ªå®šä¹‰ Hooks

#### 2.1 useLocalStorage

**ä½ç½®**: `src/hooks/useLocalStorage.js`

```javascript
import { useLocalStorage } from '../hooks/useLocalStorage';

const MyComponent = () => {
  // è‡ªåŠ¨æŒä¹…åŒ–åˆ° localStorage
  const [favorites, setFavorites] = useLocalStorage('myFavorites', []);
  
  // ä½¿ç”¨æ–¹å¼ä¸ useState ç›¸åŒ
  const addFavorite = (item) => {
    setFavorites([...favorites, item]);
  };
};
```

**ä¼˜åŠ¿**:
- âœ… è‡ªåŠ¨åŒæ­¥åˆ° localStorage
- âœ… è‡ªåŠ¨å¤„ç† JSON åºåˆ—åŒ–
- âœ… é”™è¯¯å¤„ç†

#### 2.2 useQuotes

**ä½ç½®**: `src/hooks/useQuotes.js`

```javascript
import { useQuotes } from '../hooks/useQuotes';

const QuotesComponent = () => {
  const {
    currentQuote,      // å½“å‰æ˜¾ç¤ºçš„é‡‘å¥
    quotes,            // æ‰€æœ‰é‡‘å¥
    favorites,         // æ”¶è—çš„é‡‘å¥
    isLoading,         // æ˜¯å¦åŠ è½½ä¸­
    isTransitioning,   // æ˜¯å¦æ­£åœ¨åˆ‡æ¢
    isFavorited,       // å½“å‰é‡‘å¥æ˜¯å¦å·²æ”¶è—
    getRandomQuote,    // è·å–éšæœºé‡‘å¥
    toggleFavorite,    // åˆ‡æ¢æ”¶è—çŠ¶æ€
  } = useQuotes();
  
  return (
    <div>
      <p>{currentQuote?.text}</p>
      <button onClick={getRandomQuote}>æ¢ä¸€å¥</button>
      <button onClick={toggleFavorite}>
        {isFavorited ? 'å·²æ”¶è—' : 'æ”¶è—'}
      </button>
    </div>
  );
};
```

**ä¼˜åŠ¿**:
- âœ… å°è£…æ‰€æœ‰é‡‘å¥é€»è¾‘
- âœ… æ€§èƒ½ä¼˜åŒ–ï¼ˆuseCallbackï¼‰
- âœ… æ™ºèƒ½é‡‘å¥é€‰æ‹©

#### 2.3 useKeyboardShortcut

**ä½ç½®**: `src/hooks/useKeyboardShortcut.js`

```javascript
import { useKeyboardShortcut } from '../hooks/useKeyboardShortcut';

const MyComponent = () => {
  const handleAction = () => {
    console.log('å¿«æ·é”®è§¦å‘ï¼');
  };
  
  // ç›‘å¬ç©ºæ ¼é”®
  useKeyboardShortcut('Space', handleAction, [handleAction]);
  
  // ç›‘å¬å›è½¦é”®
  useKeyboardShortcut('Enter', handleAction, [handleAction]);
  
  return <div>æŒ‰ç©ºæ ¼é”®æˆ–å›è½¦é”®è¯•è¯•</div>;
};
```

**æ”¯æŒçš„æŒ‰é”®**:
- `Space` - ç©ºæ ¼é”®
- `Enter` - å›è½¦é”®
- `Escape` - ESC é”®
- `ArrowUp/Down/Left/Right` - æ–¹å‘é”®
- ç­‰ç­‰...

---

### 3. ä½¿ç”¨ä¼˜åŒ–åçš„å·¥å…·å‡½æ•°

#### 3.1 generateQuoteCard

**ä½ç½®**: `src/utils/cardGenerator.js`

```javascript
import { generateQuoteCard, downloadCard } from '../utils/cardGenerator';

const downloadQuote = async (quote) => {
  try {
    // ç”Ÿæˆå¡ç‰‡
    const blob = await generateQuoteCard(quote);
    
    // ä¸‹è½½å¡ç‰‡
    const filename = `quote_${quote.author}_${Date.now()}.png`;
    downloadCard(blob, filename);
    
    console.log('ä¸‹è½½æˆåŠŸï¼');
  } catch (error) {
    console.error('ç”Ÿæˆå¤±è´¥:', error.message);
    alert('ç”Ÿæˆå¡ç‰‡å¤±è´¥ï¼Œè¯·é‡è¯•');
  }
};
```

**é”™è¯¯å¤„ç†**:
```javascript
// è¾“å…¥éªŒè¯
if (!quote || !quote.text || !quote.author) {
  throw new Error('æ— æ•ˆçš„é‡‘å¥æ•°æ®ï¼šç¼ºå°‘å¿…è¦çš„å­—æ®µ');
}
```

---

### 4. ä½¿ç”¨ä¼˜åŒ–åçš„ç»„ä»¶

#### 4.1 Navbar

**ä½ç½®**: `src/components/Navbar.jsx`

```javascript
import Navbar from './components/Navbar';

// åœ¨ä»»ä½•é¡µé¢ä½¿ç”¨
const MyPage = () => {
  return (
    <div>
      <Navbar currentPage="home" />  {/* home | works | quotes */}
      {/* é¡µé¢å†…å®¹ */}
    </div>
  );
};
```

**Props**:
- `currentPage`: å½“å‰é¡µé¢æ ‡è¯† ('home' | 'works' | 'quotes')

**ç‰¹ç‚¹**:
- âœ… è‡ªåŠ¨é«˜äº®å½“å‰é¡µ
- âœ… å“åº”å¼è®¾è®¡
- âœ… æ— éšœç¢æ”¯æŒ
- âœ… æ€§èƒ½ä¼˜åŒ–ï¼ˆReact.memoï¼‰

---

## ğŸ”§ å¸¸è§ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1: æ·»åŠ æ–°çš„é¡µé¢

1. åœ¨ `src/constants/index.js` æ·»åŠ é¡µé¢é…ç½®ï¼š
```javascript
export const NAV_LINKS = [
  { path: '/', label: 'åˆè§ä¹‹é¡µ', key: 'home' },
  { path: '/works', label: 'äº›è®¸å°è¯•', key: 'works' },
  { path: '/quotes', label: 'ä¸€ç‚¹æƒ³æ³•', key: 'quotes' },
  { path: '/new-page', label: 'æ–°é¡µé¢', key: 'newpage' }, // æ–°å¢
];
```

2. åˆ›å»ºé¡µé¢ç»„ä»¶ï¼š
```javascript
const NewPage = () => {
  return (
    <div>
      <Navbar currentPage="newpage" />
      {/* é¡µé¢å†…å®¹ */}
    </div>
  );
};
```

3. åœ¨è·¯ç”±ä¸­æ³¨å†Œï¼š
```javascript
<Route path="/new-page" element={<NewPage />} />
```

### åœºæ™¯ 2: æ·»åŠ æ–°çš„æœ¬åœ°å­˜å‚¨é”®

1. åœ¨ `src/constants/index.js` æ·»åŠ ï¼š
```javascript
export const STORAGE_KEYS = {
  FAVORITES: 'favorites',
  SHOWN_QUOTE_IDS: 'shownQuoteIds',
  MY_NEW_KEY: 'myNewKey', // æ–°å¢
};
```

2. ä½¿ç”¨ï¼š
```javascript
const [myData, setMyData] = useLocalStorage(STORAGE_KEYS.MY_NEW_KEY, []);
```

### åœºæ™¯ 3: ä¿®æ”¹å¡ç‰‡æ ·å¼

1. åœ¨ `src/constants/index.js` ä¿®æ”¹é…ç½®ï¼š
```javascript
export const CARD_CONFIG = {
  WIDTH: 540,        // ä¿®æ”¹å®½åº¦
  HEIGHT: 960,       // ä¿®æ”¹é«˜åº¦
  PADDING: 60,       // ä¿®æ”¹å†…è¾¹è·
  // ...
};

export const COLORS = {
  TEXT: {
    PRIMARY: '#144a74',  // ä¿®æ”¹ä¸»æ–‡å­—é¢œè‰²
    // ...
  },
};
```

2. å¡ç‰‡ä¼šè‡ªåŠ¨ä½¿ç”¨æ–°é…ç½®

---

## ğŸ“ å¼€å‘å»ºè®®

### 1. ä»£ç é£æ ¼

```javascript
// âœ… å¥½çš„åšæ³•
import { STORAGE_KEYS } from '../constants';
const key = STORAGE_KEYS.FAVORITES;

// âŒ é¿å…ç¡¬ç¼–ç 
const key = 'favorites';
```

### 2. ç»„ä»¶ä¼˜åŒ–

```javascript
// âœ… ä½¿ç”¨ React.memo ä¼˜åŒ–çº¯ç»„ä»¶
export default React.memo(MyComponent);

// âœ… ä½¿ç”¨ useCallback ä¼˜åŒ–å‡½æ•°
const handleClick = useCallback(() => {
  // ...
}, [deps]);
```

### 3. é”™è¯¯å¤„ç†

```javascript
// âœ… ä½¿ç”¨ try-catch
try {
  const result = await asyncFunction();
} catch (error) {
  console.error('æ“ä½œå¤±è´¥:', error.message);
  alert('æ“ä½œå¤±è´¥ï¼Œè¯·é‡è¯•');
}
```

### 4. ç±»å‹æ³¨é‡Š

```javascript
/**
 * å‡½æ•°è¯´æ˜
 * @param {string} param1 - å‚æ•°1è¯´æ˜
 * @param {number} param2 - å‚æ•°2è¯´æ˜
 * @returns {boolean} è¿”å›å€¼è¯´æ˜
 */
const myFunction = (param1, param2) => {
  // ...
};
```

---

## ğŸš€ æ€§èƒ½ä¼˜åŒ–æŠ€å·§

### 1. ä½¿ç”¨ React.memo

```javascript
// é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“
export default React.memo(MyComponent);
```

### 2. ä½¿ç”¨ useCallback

```javascript
// é¿å…å‡½æ•°é‡æ–°åˆ›å»º
const memoizedCallback = useCallback(() => {
  doSomething(a, b);
}, [a, b]);
```

### 3. æ‡’åŠ è½½å›¾ç‰‡

```jsx
<img src="/image.jpg" loading="lazy" alt="æè¿°" />
```

### 4. ä»£ç åˆ†å‰²

```javascript
// ä½¿ç”¨åŠ¨æ€å¯¼å…¥
const HeavyComponent = lazy(() => import('./HeavyComponent'));

<Suspense fallback={<Loading />}>
  <HeavyComponent />
</Suspense>
```

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: Hook åªèƒ½åœ¨ç»„ä»¶é¡¶å±‚ä½¿ç”¨ï¼Ÿ
æ˜¯çš„ï¼ŒHooks ä¸èƒ½åœ¨å¾ªç¯ã€æ¡ä»¶æˆ–åµŒå¥—å‡½æ•°ä¸­è°ƒç”¨ã€‚

```javascript
// âŒ é”™è¯¯
if (condition) {
  const [state, setState] = useState(0);
}

// âœ… æ­£ç¡®
const [state, setState] = useState(0);
if (condition) {
  setState(1);
}
```

### Q2: useEffect çš„ä¾èµ–æ•°ç»„æ€ä¹ˆå†™ï¼Ÿ
ä¾èµ–æ•°ç»„åº”åŒ…å«æ‰€æœ‰åœ¨ effect ä¸­ä½¿ç”¨çš„å¤–éƒ¨å˜é‡ã€‚

```javascript
// âœ… æ­£ç¡®
useEffect(() => {
  doSomething(value);
}, [value]); // value è¢«ä½¿ç”¨ï¼Œæ‰€ä»¥è¦åŒ…å«åœ¨ä¾èµ–ä¸­
```

### Q3: å¦‚ä½•é¿å…æ— é™å¾ªç¯ï¼Ÿ
ç¡®ä¿ä¾èµ–æ•°ç»„æ­£ç¡®ï¼Œé¿å…åœ¨ effect ä¸­æ›´æ–°ä¾èµ–ã€‚

```javascript
// âŒ ä¼šå¯¼è‡´æ— é™å¾ªç¯
useEffect(() => {
  setCount(count + 1);
}, [count]);

// âœ… ä½¿ç”¨å‡½æ•°å¼æ›´æ–°
useEffect(() => {
  setCount(c => c + 1);
}, []); // ç©ºä¾èµ–ï¼Œåªæ‰§è¡Œä¸€æ¬¡
```

---

## ğŸ“š è¿›ä¸€æ­¥å­¦ä¹ 

- [React Hooks æ–‡æ¡£](https://react.dev/reference/react)
- [JavaScript æœ€ä½³å®è·µ](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide)
- [ä»£ç ä¼˜åŒ–æŠ¥å‘Š](./ä»£ç ä¼˜åŒ–æŠ¥å‘Š.md)

---

## ğŸ’¡ æç¤º

1. **ä¿æŒä¸€è‡´æ€§**: ä½¿ç”¨ç»Ÿä¸€çš„ä»£ç é£æ ¼
2. **æ³¨é‡æ€§èƒ½**: ä½¿ç”¨ React DevTools Profiler æ£€æŸ¥æ€§èƒ½
3. **å†™å¥½æ³¨é‡Š**: è®©ä»£ç è‡ªè§£é‡Šï¼Œå¿…è¦æ—¶æ·»åŠ æ³¨é‡Š
4. **æŒç»­ä¼˜åŒ–**: å®šæœŸå®¡æŸ¥å’Œé‡æ„ä»£ç 

ç¥æ‚¨å¼€å‘æ„‰å¿«ï¼ğŸ‰

